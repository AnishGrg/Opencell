<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:s="http://jboss.com/products/seam/taglib"
	xmlns:a="http://richfaces.org/a4j" xmlns:hftl="http://hftl.org"
	xmlns:hf="http://java.sun.com/jsf/composite/tags"
	xmlns:p="http://primefaces.org/ui" template="/layout/template.xhtml">

	<ui:define name="navigation">
		<ui:include src="/layout/navigation.xhtml" />
	</ui:define>

	<ui:define name="body">

		<hftl:entityPopup id="tradingCountryPopup"
			header="#{messages['tradingCountry.popup.header']}"
			backingBean="#{tradingCountryBean}" dataModel="#{tradingCountries}"
			searchField1Label="#{messages['businessEntity.code']}"
			searchField1="code"
			searchField2Label="#{messages['businessEntity.description']}"
			searchField2="name" column1Label="#{messages['businessEntity.code']}"
			column1="id" column2Label="#{messages['businessEntity.description']}"
			column2="prDescription" filtersMap="#{tradingCountryBean.filters}">
			<!-- select link -->
			<a:commandLink value="#{messages['commons.select']}"
				reRender="formCustomer"
				action="#{customer.setTradingCountry(entity)}"
				oncomplete="Richfaces.hideModalPanel('tradingCountryPopup')">
			</a:commandLink>
		</hftl:entityPopup>
		<hftl:entityPopup id="tradingLanguagePopup"
			header="#{messages['tradingLanguage.popup.header']}"
			backingBean="#{tradingLanguageBean}" dataModel="#{tradingLanguages}"
			searchField1Label="#{messages['businessEntity.code']}"
			searchField1="code"
			searchField2Label="#{messages['businessEntity.description']}"
			searchField2="name" column1Label="#{messages['businessEntity.code']}"
			column1="id" column2Label="#{messages['businessEntity.description']}"
			column2="prDescription" filtersMap="#{tradingLanguageBean.filters}">
			<!-- select link -->
			<a:commandLink value="#{messages['commons.select']}"
				reRender="formCustomer"
				action="#{customer.setTradingLanguage(entity)}"
				oncomplete="Richfaces.hideModalPanel('tradingLanguagePopup')">
			</a:commandLink>
		</hftl:entityPopup>
		<hftl:entityPopup id="customerCurrencyPopup"
			header="#{messages['customerCurrencyPopup.header']}"
			backingBean="#{tradingCurrencyBean}" dataModel="#{tradingCurrencies}"
			column1Label="#{messages['countryCom.id']}" column1="id"
			column2Label="#{messages['currency.codeCurrency']}"
			column2="currencyCode" filtersMap="#{tradingCurrencyBean.filters}">
			<a:commandLink value="#{messages['commons.select']}"
				reRender="formCustomer"
				action="#{customer.setTradingCurrency(entity)}"
				oncomplete="Richfaces.hideModalPanel('customerCurrencyPopup')">
			</a:commandLink>
		</hftl:entityPopup>

		<h:panelGrid columns="1" width="100%">
			<h:panelGroup>
				<div class="panels">
					<!-- <custom:hierarchyPanel
						treeValue="#{customerTreeBean.buildAccountsHierarchy(customer)}"
						entity="#{customer}" /> -->
					<hf:formPanel edit="#{edit}" formId="formCustomer"
						label="#{messages['customer.customerPanel']}"
						backingBean="#{customerBean}" entity="#{customer}"
						style="formPanel">
						<p:tabView id="tabView">
							<p:tab title="Compte">
								<hf:formField label="#{messages['businessEntity.code']}"
									field="code" validateUnique="true" />
								<hf:formField label="#{messages['businessEntity.description']}"
									field="description" useConverter="false" size="50"
									maxlength="50" />
								<hf:formField label="#{messages['customer.externalRef1']}"
									field="externalRef1" validateUnique="false" />
								<hf:formField label="#{messages['customer.externalRef2']}"
									field="externalRef2" />
								<hf:formEntityField
									label="#{messages['customer.customerCategory']}"
									field="customerCategory" childField="description" popup="false"
									service="#{customerCategoryService}" required="true" />
								<hf:formEntityField
									label="#{messages['customer.customerBrand']}"
									field="customerBrand" childField="description" popup="false"
									service="#{customerBrandService}" required="true" />
								<p:panelGrid columns="1">
									<hf:formEntityField id="customerCurrencySelectId"
										label="#{messages['currency.codeCurrency']}"
										field="tradingCurrency" childField="currencyCode" popup="true"
										popupId="customerCurrencyPopup" />
								</p:panelGrid>
								<hf:formEntityField id="trCountrySelectId"
									label="#{messages['tradingCountry.tradingCountry']}"
									field="tradingCountry" childField="id" popup="true"
									popupId="tradingCountryPopup" />
								<hf:formEntityField id="trLanguageSelectId"
									label="#{messages['tradingLanguage.tradingLanguage']}"
									field="tradingLanguage" childField="id" popup="true"
									popupId="tradingLanguagePopup" />

							</p:tab>
							<p:tab title="Informations">
								<p:fieldset legend="#{messages['commons.contacts']}">
									<p:panelGrid columns="1">
										<hf:formEntityField
											label="#{messages['contactInformation.email']}"
											field="contactInformation" childField="email" popup="false"
											required="false" size="50" maxlength="100"
											useConverter="false" />
										<hf:formEntityField label="#{messages['address.address1']}"
											field="address" childField="address1" popup="false" size="80"
											maxlength="80" required="true" />
										<hf:formEntityField label="#{messages['address.address2']}"
											field="address" childField="address2" popup="false" size="80"
											maxlength="80" />
										<hf:formEntityField label="#{messages['address.address3']}"
											field="address" childField="address3" popup="false" size="80"
											maxlength="80" />
									</p:panelGrid>
									<p:panelGrid columns="2">
										<hf:formEntityField label="#{messages['address.zipCode']}"
											field="address" childField="zipCode" popup="false"
											required="true" maxlength="5" size="5" />
										<hf:formEntityField label="#{messages['address.city']}"
											field="address" childField="city" popup="false"
											required="true" maxlength="50" />
										<p:outputPanel id="countryPanel">
											<h:outputText value="#{messages['address.country']}" />
											<h:selectOneMenu required="true" rendered="#{edit}"
												value="#{customer.address.country}">
												<s:selectItems
													value="#{messages['address.countrys'].split(',')}"
													var="country" label="#{country}" />
											</h:selectOneMenu>
											<h:outputText rendered="#{!edit}"
												value="#{customer.address.country}" />
										</p:outputPanel>
									</p:panelGrid>
								</p:fieldset>
							</p:tab>
						</p:tabView>

					</hf:formPanel>
					<h:form id="operationsForm" rendered="#{!edit}">
						<!-- <custom:listPanel
							label="#{messages['customerAccount.operations']}"> -->
						<h:commandButton action="addCustomerAccount"
							value="#{messages['customer.buttonAddCustomerAccount']}" />
					</h:form>
				</div>
			</h:panelGroup>
		</h:panelGrid>
	</ui:define>

</ui:composition>
