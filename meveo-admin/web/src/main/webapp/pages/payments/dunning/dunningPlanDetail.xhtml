<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:a="http://richfaces.org/a4j" xmlns:hftl="http://hftl.org"
	xmlns:hf="http://java.sun.com/jsf/composite/tags"
	xmlns:s="http://jboss.org/seam/faces"
	xmlns:p="http://primefaces.org/ui" template="/layout/template.xhtml"
	xmlns:e="http://primefaces.org/extension">

 
	
	<ui:define name="navigation">
		<ui:include src="/layout/navigation.xhtml" />
	</ui:define>

	<ui:define name="body">
	
		<hf:formPanel label="#{messages['dunningPlan.panel']}" backingBean="#{dunningPlanBean}">
			<hftl:panelGroup columns="2">
			<hf:formField label="#{messages['businessEntity.code']}" field="code"  required="true" validateUnique="true"/>
			<hf:formField label="#{messages['businessEntity.description']}" field="description" useConverter="false" size="50" maxlength="50"/>
			<hf:formField label="#{messages['dunningPlan.creditCategory']}" field="creditCategory" required="true"/>
			<hf:formField label="#{messages['dunningPlan.paymentMethod']}" field="paymentMethod" required="true"/>
			 </hftl:panelGroup>
			<hf:formField label="#{messages['common.status']}" field="status" required="true"  />
		</hf:formPanel>	
	<hftl:panelGroup columns="1">	
	<p:outputPanel id="transitions_panel"  rendered="#{dunningPlanBean.entity.id!=null}">
	<h:outputText value="#{messages['dunningPlan.transitions']}"  style="font-weight:bold;"  />
	<br /><br />
		<p:panel>
		<h:form id="transitions_form"  >
			<hftl:dataList form="transitions" resultsId ="transitions"  backingBean="#{dunningPlanTransitionBean}"    dataModel="#{dunningPlanBean.entity.transitions}" checkMany="false" exportButton="false">
	    		<hftl:column label="#{messages['dunningPlanTransition.dunningLevelFrom']}" field="dunningLevelFrom" />
				<hftl:column label="#{messages['dunningPlanTransition.dunningLevelTo']}" field="dunningLevelTo" />
				<hftl:column label="#{messages['dunningPlanTransition.delayBeforeProcess']}" field="delayBeforeProcess" />
				<hftl:column label="#{messages['dunningPlanTransition.thresholdAmount']}" field="thresholdAmount" />
				<hftl:column label="#{messages['dunningPlanTransition.waitDuration']}" field="waitDuration" />  
				<hftl:actionsColumn/> 				
		    </hftl:dataList >
			 
		</h:form >
			 <p:button outcome="addNewTransition"  value="#{messages['dunningPlan.addNewTransition']}" includeViewParams="true"  > 
			<f:param name="cid" value="#{conversation.id}" />
            </p:button ><br /><br />
			
				</p:panel>   
	</p:outputPanel>
	  
	<p:outputPanel id="actionItems_panel"  rendered="#{dunningPlanBean.entity.id!=null}">
		<h:outputText value="#{messages['dunningPlan.actions']}"  style="font-weight:bold;"   />
		<br /><br />
		<p:panel>
		<h:form id="actionItems_form"  >
			<hftl:dataList label="#{messages['dunningPlan.title']}"  backingBean="#{actionPlanItemBean}"   dataModel="#{dunningPlanBean.entity.actions}" checkMany="false" exportButton="false">
	    		<hftl:column label="#{messages['actionPlanItem.dunningLevel']}" field="dunningLevel" />
				<hftl:column label="#{messages['actionPlanItem.actionType']}" field="actionType" />
				<hftl:column label="#{messages['actionPlanItem.order']}" field="itemOrder" />
				<hftl:column label="#{messages['actionPlanItem.thresholdAmount']}" field="thresholdAmount" />
				<hftl:column label="#{messages['actionPlanItem.letterTemplate']}" field="letterTemplate" />
				<hftl:actionsColumn/> 
		   </hftl:dataList>
		
		</h:form >
		  <p:button outcome="addNewActionItem"  value="#{messages['dunningPlan.addNewActionPlanItem']}"  includeViewParams="true" >
			 <f:param name="cid" value="#{conversation.id}" />
            </p:button >
		</p:panel>   
	</p:outputPanel>		
				
	</hftl:panelGroup>		
			
	</ui:define>

</ui:composition>
