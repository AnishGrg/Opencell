<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:s="http://jboss.com/products/seam/taglib" xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core" xmlns:h="http://java.sun.com/jsf/html" xmlns:hftl="http://hftl.org" xmlns:hf="http://java.sun.com/jsf/composite/tags"
    xmlns:c="http://java.sun.com/jstl/core" xmlns:p="http://primefaces.org/ui" template="/layout/template.xhtml">

    <ui:define name="navigation">
        <ui:include src="/layout/navigation.xhtml" />
    </ui:define>

    <ui:define name="body">
        <p:messages id="messages" />
        <h:panelGroup layout="block" styleClass="col2-set">
            <h:panelGroup id="userGroupPanel" layout="block" styleClass="col1">
                <p:panel header="#{messages['userGroupHierarchy.userGroupLevelHierarchy']}">
                    <p:outputPanel style="height: 100%;overflow: auto;display: block">
                        <p:tree style="height: 375px; width: 95%" value="#{userHierarchyLevelBean.rootNode}" var="userGroupLevel" selectionMode="single" rendered="#{userHierarchyLevelBean.rootNode.childCount>0}">
                            <p:ajax event="select" listener="#{userHierarchyLevelBean.onNodeSelect}" update="messages buttons userGroupLevelDetailPanel" />
                            <p:treeNode>
                                <h:outputText value="#{userGroupLevel.descriptionOrCode}" />
                            </p:treeNode>
                        </p:tree>
                        <h:outputText value="#{messages['userGroupHierarchy.noGroups']}" rendered="#{userHierarchyLevelBean.rootNode.childCount==0}" />
                    </p:outputPanel>
                </p:panel>
            </h:panelGroup>
            <h:panelGroup layout="block" styleClass="col2">
                <p:panel header="#{messages['userGroupHierarchy.userGroupLevel']}" styleClass="form-panel">
                    <h:panelGrid columns="1" id="buttons" styleClass="clearLeft">
                        <h:panelGrid columns="2">
                            <p:commandButton id="addUserHierarchyRootBtn" icon="fa fa-home" action="#{userHierarchyLevelBean.newUserHierarchyRoot()}"
                                            update="messages userGroupLevelDetailPanel" style="padding-right:5px" >
                            </p:commandButton>
                            <p:outputLabel value="#{messages['userGroupHierarchy.addUserGroupRoot']}"/>
                        </h:panelGrid>
                        <h:panelGrid columns="2">
                            <p:commandButton id="addUserHierarchyLevelBtn" icon="fa fa-plus" action="#{userHierarchyLevelBean.newUserHierarchyLevel()}"
                                             update="messages userGroupLevelDetailPanel">
                            </p:commandButton>
                            <p:outputLabel  value="#{messages['userGroupHierarchy.addUserGroupLevel']}"/>
                        </h:panelGrid>
                        <h:panelGrid columns="2">
                            <p:commandButton id="moveUpUserHierarchyLevelBtn" icon="ui-icon-arrowthick-1-n" action="#{userHierarchyLevelBean.moveUp()}"
                                             update="messages userGroupPanel buttons" ajax="true" />
                            <p:outputLabel  value="#{messages['userGroupHierarchy.moveUp']}"/>
                        </h:panelGrid>
                        <h:panelGrid columns="2">
                            <p:commandButton id="moveDownUserHierarchyLevelBtn" icon="ui-icon-arrowthick-1-s" action="#{userHierarchyLevelBean.moveDown()}"
                                             update="messages userGroupPanel buttons" ajax="true" />
                            <p:outputLabel  value="#{messages['userGroupHierarchy.moveDown']}"/>
                        </h:panelGrid>
                        <h:panelGrid columns="2">
                            <p:commandButton id="deleteUserHierarchyLevellink" icon="ui-icon-trash" action="#{userHierarchyLevelBean.removeUserHierarchyLevel()}"
                                             update="messages userGroupPanel buttons" ajax="true">
                                <p:confirm header="#{messages['commons.confirmationHeader']}" message="#{messages['userGroupHierarchy.confirmDelete']}" icon="ui-icon-alert" />
                            </p:commandButton>
                            <p:outputLabel value="#{messages['userGroupHierarchy.deleteUserGroupLevel']}"/>
                        </h:panelGrid>
                    </h:panelGrid>

                    <p:fieldset legend="#{messages['userGroupHierarchy.configureUserGroupLevel']}" styleClass="clearLeft">
                        <h:panelGroup id="userGroupLevelDetailPanel">
                            <hftl:formPanel formId="userGroupHierarchyDetail" backingBean="#{userHierarchyLevelBean}" showBackButton="false" showDeleteButton="false"
                                ajaxSubmit="true" submitUpdate="@form userGroupPanel messages" showMessages="false">
                                <hftl:formField label="#{messages['businessEntity.code']}" field="code" required="true" validateUnique="true" size="50" />
                                <hftl:formField label="#{messages['businessEntity.description']}" field="description" newLine="true" size="80"/>
                            </hftl:formPanel>
                        </h:panelGroup>
                     </p:fieldset>
                </p:panel>
            </h:panelGroup>
        </h:panelGroup>
    </ui:define>

</ui:composition>