<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:s="http://jboss.com/products/seam/taglib"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:hftl="http://hftl.org"
	xmlns:hf="http://java.sun.com/jsf/composite/tags"
	template="/layout/template.xhtml"
	xmlns:e="http://jboss.com/products/seam/excel"
	xmlns:p="http://primefaces.org/ui">

	<ui:define name="navigation">
		<ui:include src="/layout/navigation.xhtml" />
	</ui:define>

	<ui:define name="body">

		<hf:formPanel formId="form3" edit="false"
			label="#{messages['postInvoicingReport.title']}"
			backingBean="#{billingRunBean}" showFormButtons="false">

					<hf:formField
						label="#{messages['postInvoicingReport.globalAmountHT']}"
						field="postInvoicingReports" valueLabelField="globalAmount"
						popup="false" />
					<hf:formField
						label="#{messages['postInvoicingReport.invoicesNumber']}"
						field="postInvoicingReports" valueLabelField="invoicesNumber"
						popup="false" />
					<hf:formField
						label="#{messages['postInvoicingReport.positiveInvoicesNumber']}"
						field="postInvoicingReports" valueLabelField="positiveInvoicesNumber"
						popup="false" />
					<hf:formField
						label="#{messages['postInvoicingReport.positiveInvoicesAmountHT']}"
						field="postInvoicingReports" valueLabelField="positiveInvoicesAmountHT"
						popup="false" />
					<hf:formField
						label="#{messages['postInvoicingReport.positiveInvoicesAmount']}"
						field="postInvoicingReports" valueLabelField="positiveInvoicesAmount"
						popup="false" />

					<hf:formField id="emptyInvoicesNumber"
						label="#{messages['postInvoicingReport.emptyInvoicesNumber']}"
						field="postInvoicingReports" valueLabelField="emptyInvoicesNumber"
						popup="false" />


					<hf:formField
						label="#{messages['postInvoicingReport.positiveInvoicesTaxAmount']}"
						field="postInvoicingReports"
						valueLabelField="positiveInvoicesTaxAmount" popup="false" />
					<hf:formField
						label="#{messages['postInvoicingReport.negativeInvoicesAmountHT']}"
						field="postInvoicingReports" valueLabelField="negativeInvoicesAmountHT"
						popup="false" />
					<hf:formField
						label="#{messages['postInvoicingReport.negativeInvoicesTaxAmount']}"
						field="postInvoicingReports"
						valueLabelField="negativeInvoicesTaxAmount" popup="false" />
					<hf:formField id="positiveInvoicesAmount"
						label="#{messages['postInvoicingReport.negativeInvoicesAmount']}"
						field="postInvoicingReports" valueLabelField="negativeInvoicesAmount"
						popup="false" />
					<hf:formField id="electronicInvoicesNumber"
						label="#{messages['postInvoicingReport.electronicInvoicesNumber']}"
						field="postInvoicingReports" valueLabelField="electronicInvoicesNumber"
						popup="false" />



			<b>#{messages['postInvoicingReport.invoicesNumberPerPaymentMode']}</b>

				<hf:formField label="#{messages['paymentMethod.check']}"
					field="postInvoicingReports" valueLabelField="checkInvoicesNumber"
					popup="false" />

				<hf:formField label="#{messages['paymentMethod.directDebit']}"
					field="postInvoicingReports" valueLabelField="directDebitInvoicesNumber"
					popup="false" />

				<hf:formField label="#{messages['paymentMethod.tip']}"
					field="postInvoicingReports" valueLabelField="tipInvoicesNumber"
					popup="false" />

				<hf:formField
					label="#{messages['paymentMethod.wiretransfer']}"
					field="postInvoicingReports"
					valueLabelField="wiretransferInvoicesNumber" popup="false" />


			<b>#{messages['postInvoicingReport.amoutHtPerPaymentMode']}</b>

				<hf:formField label="#{messages['paymentMethod.check']}"
					field="postInvoicingReports" valueLabelField="checkAmuontHT"
					popup="false" />

				<hf:formField label="#{messages['paymentMethod.directDebit']}"
					field="postInvoicingReports" valueLabelField="directDebitAmuontHT"
					popup="false" />

				<hf:formField label="#{messages['paymentMethod.tip']}"
					field="postInvoicingReports" valueLabelField="tipAmuontHT" popup="false" />

				<hf:formField
					label="#{messages['paymentMethod.wiretransfer']}"
					field="postInvoicingReports" valueLabelField="wiretransferAmuontHT"
					popup="false" />


			<b>#{messages['postInvoicingReport.amoutTtcPerPaymentMode']}</b>


				<hf:formField label="#{messages['paymentMethod.check']}"
					field="postInvoicingReports" valueLabelField="checkAmuont" popup="false" />

				<hf:formField label="#{messages['paymentMethod.directDebit']}"
					field="postInvoicingReports" valueLabelField="directDebitAmuont"
					popup="false" />

				<hf:formField label="#{messages['paymentMethod.tip']}"
					field="postInvoicingReports" valueLabelField="tipAmuont" popup="false" />

				<hf:formField
					label="#{messages['paymentMethod.wiretransfer']}"
					field="postInvoicingReports" valueLabelField="wiretransferAmuont"
					popup="false" />


		</hf:formPanel>


		<h:outputText value="#{messages['postInvoicingReport.billableBA']}"
			style="font-weight: bold;font-size=14;" />
		<hftl:dataList dataModel="#{billingRunBean.entity.invoices}"
			backingBean="#{invoiceBean}" checkMany="false">

			<hftl:column label="#{messages['businessEntity.code']}"
				field="billingAccount.code" />
			<p:column width="100">
				<f:facet name="header">
					<h:outputText value="#{messages['name.title']}" />
				</f:facet>
				<e:cell>
					<h:outputText
						rendered="#{entity.billingAccount.name.title != null}"
						value="#{entity.billingAccount.name.title.description}" />
				</e:cell>
			</p:column>

			<hftl:column label="#{messages['billingAccount.name']}"
				field="billingAccount.name" />
			<hftl:column label="#{messages['invoice.amountWithoutTax']}"
				field="amountWithoutTax" />
			<hftl:column label="#{messages['invoice.amountTax']}"
				field="amountTax" />
			<hftl:column label="#{messages['invoice.amountWithTax']}"
				field="amountWithTax" />

		</hftl:dataList>


		<h:outputText
			value="#{messages['postInvoicingReport.rejectedBillingAccounts']}"
			style="font-weight: bold;font-size=14;" />
		<hftl:dataList resultsId="rejectedBA_results"
			backingBean="#{billingAccountBean}"
			dataModel="#{billingRunBean.entity.rejectedBillingAccounts}"
			checkMany="false">

			<hftl:column label="#{messages['businessEntity.code']}"
				field="billingAccount.code" />

			<p:column width="100">
				<f:facet name="header">
					<h:outputText value="#{messages['name.title']}" />
				</f:facet>
				<e:cell>
					<h:outputText
						rendered="#{entity.billingAccount.name.title != null}"
						value="#{entity.billingAccount.name.title.description}" />
				</e:cell>
			</p:column>

			<hftl:column label="#{messages['billingAccount.name']}"
				field="billingAccount.name" />


			<hftl:column
				label="#{messages['RejectedBillingAccounts.rejectCause']}"
				field="rejectCause" />

		</hftl:dataList>

        <hftl:decorateFormField label="#{messages['billingRuns.launchInvoicing']}" displayOneLine="true" componentWidth="50">
			<p:selectBooleanCheckbox
				value="#{billingRunBean.launchInvoicingRejectedBA}" />
		</hftl:decorateFormField>

		<h:form id="operationsForm2"
			rendered="#{billingRun.getInvoices().size()>0}">
			<h:commandButton action="#{billingRunBean.excludeBillingAccounts}"
				value="Exclude" />
		</h:form>


		<h:form id="operationsForm" rendered="#{!edit}">
			<div class="action-buttons">
				<p:commandButton action="#{billingRunBean.validateInvoicing()}"
					value="#{messages['action.validate']}" />
				<!-- <h:commandButton
				action="#{billingRunBean.rerateConfirmedInvoicing()}"
				value="Rerate" /> -->
				<p:commandButton
					action="#{billingRunBean.cancelConfirmedInvoicing()}"
					value="#{messages['action.cancel']}"
					onclick="if(confirm('#{messages['commons.confirmCancelInvoiceProcess']}')){return true;}else{return false;}" />
			</div>
		</h:form>
	</ui:define>
</ui:composition>
