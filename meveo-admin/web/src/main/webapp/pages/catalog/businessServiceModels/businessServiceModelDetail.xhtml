<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:f="http://java.sun.com/jsf/core" xmlns:h="http://java.sun.com/jsf/html"
    xmlns:hftl="http://hftl.org" xmlns:hf="http://java.sun.com/jsf/composite/tags" xmlns:p="http://primefaces.org/ui" template="/layout/template.xhtml">

    <ui:define name="metadata">
        <f:metadata>
            <f:viewParam name="objectId" value="#{businessServiceModelBean.objectId}" />
        </f:metadata>
    </ui:define>

    <ui:define name="navigation">
        <ui:include src="/layout/navigation.xhtml" />
    </ui:define>

    <ui:define name="body">

        <hftl:entityPopup id="serviceTemplatePopup" header="#{messages['businessServiceModel.serviceTemplate']}" updateField=":moduleForm:serviceSelectId_entity"
            selection="#{businessServiceModelBean.entity.serviceTemplate}" backingBean="#{serviceTemplateListBean}" dataModel="#{serviceTemplateListBean.lazyDataModelNoBSM}"
            searchField1Label="#{messages['businessEntity.code']}" searchField1="code" column1Label="#{messages['businessEntity.code']}" column1="code"
            column2Label="#{messages['businessEntity.description']}" column2="description">
        </hftl:entityPopup>

        <p:panel>
            <h:form id="crumbmenuForm">
                <p:breadCrumb homeDisplay="text" id="crumbmenu">
                    <p:menuitem value="#{messages['menu.catalog']}" disabled="true" />
                    <p:menuitem outcome="businessServiceModels" value="#{messages['menu.businessServiceOffer']}" />
                </p:breadCrumb>
            </h:form>
        </p:panel>

        <ui:include src="../../admin/module/modulePopups.xhtml">
            <ui:param name="backingBean" value="#{businessServiceModelBean}" />
        </ui:include>

        <hftl:formPanel formId="moduleForm" label="#{messages['businessServiceModel.title']}" backingBean="#{businessServiceModelBean}"
            showEnableDisableButton="#{businessServiceModelBean.entity.installed}">
            <hftl:formField label="#{messages['BusinessEntity.code']}" field="code" required="true" validateUnique="true" />
            <hftl:formField label="#{messages['BusinessEntity.description']}" field="description" useConverter="false" id="description" maxlength="50" />
            <hftl:formField label="#{messages['meveoModule.license']}" required="true" field="license" id="license" isMessage="true" newLine="true" />
            <hftl:formField id="serviceSelectId" required="true" label="#{messages['businessServiceModel.serviceTemplate']}" field="serviceTemplate" valueLabelField="code"
                popup="true" popupId="serviceTemplatePopup" />
            <hftl:formField id="script" label="#{messages['meveoModule.script']}" field="script" valueLabelField="code" componentWidth="30" popup="true" popupId="moduleScriptPopup"
                createEditPopup="true" createEditPopupId="scriptDialog" createEditPopupListenerBean="#{businessServiceModelBean}" createEditPopupListenerViewMethod="viewEditScript"
                createEditPopupListenerNewMethod="newScript" createEditPopupListenerUpdate=":scriptForm" />
            <hftl:formField label="#{messages['meveoModule.installed']}" doNotShowOnNew="true" allowEdit="false" field="installed" isMessage="true"
                rendered="#{businessServiceModelBean.entity.moduleSource!=null}" />
            <hftl:formField label="#{messages['enableEntity.disabled']}" doNotShowOnNew="true" allowEdit="false" field="disabled" isMessage="true"
                rendered="#{businessServiceModelBean.entity.installed}" />

            <ui:include src="../../admin/module/moduleTree.xhtml">
                <ui:param name="backingBean" value="#{businessServiceModelBean}" />
            </ui:include>

        </hftl:formPanel>



    </ui:define>
</ui:composition>
