<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:s="http://jboss.org/seam/faces"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:o="http://omnifaces.org/ui"
	xmlns:of="http://omnifaces.org/functions" xmlns:hftl="http://hftl.org"
	xmlns:pe="http://primefaces.org/ui/extensions">

<ui:composition>

	<c:set var="mainBackingBean" value="#{backingBean}" />

	<hftl:entityPopup id="searchProductTemplatePopup"
		header="#{messages['productTemplate.title']}"
		updateField=":tabView:productForm:productTemplateCode :tabView:productForm:productTemplateCode_text"
		selection="#{mainBackingBean.offerProductTemplate.productTemplate}"
		backingBean="#{productTemplateBean}"
		searchField1Label="#{messages['BusinessEntity.code']}"
		searchField1="code" column1Label="#{messages['BusinessEntity.code']}"
		column1="code"></hftl:entityPopup>

	<p:panel styleClass="form-panel">
		<hftl:decorateFormField fieldId="offerTemplateCode1"
			label="#{messages['offerTemplate.code']}">
			<h:outputText id="offerTemplateCode1"
				value="#{mainBackingBean.entity.code}" disabled="true"
				style="font-weight:bold;" />
			<h:inputHidden rendered="#{mainBackingBean.edit}" />
		</hftl:decorateFormField>
		<hftl:decorateFormField fieldId="offerTemplateDescription2"
			label="#{messages['offerTemplate.description']}">
			<h:outputText id="offerTemplateDescription2"
				value="#{mainBackingBean.entity.description}" disabled="true"
				style="font-weight:bold;" />
			<h:inputHidden rendered="#{mainBackingBean.edit}" />
		</hftl:decorateFormField>
	</p:panel>

	<h:panelGroup id="productPanel">
		<hftl:dataList id="productTable" backingBean="#{mainBackingBean}"
			dataModel="#{mainBackingBean.entity.offerProductTemplates}"
			resultsId="products_results" exportToXml="false">
			<hftl:column label="#{messages['productTemplate.title']}"
				field="productTemplate.code" entityView="productTemplateDetail"
				valueIdField="productTemplate.id" />
			<hftl:column label="#{messages['offerServiceTemplate.mandatory']}"
				field="mandatory" />
			<p:column styleClass="actions-column"
				rendered="#{mainBackingBean.edit}">
				<f:facet name="header">
					<h:outputText value="#{messages['commons.actions']}" />
				</f:facet>
				<p:commandButton update=":tabView:serviceForm"
					action="#{mainBackingBean.editOfferProductTemplate(entity)}"
					icon="ui-icon-document" />
				<p:commandButton
					action="#{mainBackingBean.deleteOfferProductTemplate(entity)}"
					rendered="#{mainBackingBean.canUserUpdateEntity()}"
					icon="ui-icon-trash"
					update=":tabView:productPanel :tabView:productForm" />
			</p:column>
		</hftl:dataList>
	</h:panelGroup>

	<p:panel rendered="#{mainBackingBean.edit}">
		<hftl:formPanel formId="productForm" edit="#{mainBackingBean.edit}"
			backingBean="#{mainBackingBean}"
			entity="#{mainBackingBean.offerProductTemplate}"
			showFormButtons="false" ajaxSubmit="true">
			<hftl:formField label="#{messages['productTemplate.title']}"
				id="productTemplateCode" field="productTemplate"
				valueLabelField="code" popup="true"
				popupId="searchProductTemplatePopup" clearButton="true"
				required="true"
				disabled="#{!mainBackingBean.offerProductTemplate.transient}" />
			<hftl:formField label="#{messages['offerServiceTemplate.mandatory']}"
				id="mandatory" field="mandatory" />
		</hftl:formPanel>
	</p:panel>

</ui:composition>
</html>