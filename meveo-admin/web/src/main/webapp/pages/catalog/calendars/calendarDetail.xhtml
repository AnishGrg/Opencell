<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:s="http://jboss.com/products/seam/taglib" xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core" xmlns:h="http://java.sun.com/jsf/html" xmlns:rich="http://richfaces.org/rich"
    xmlns:a="http://richfaces.org/a4j" xmlns:hftl="http://hftl.org" xmlns:hf="http://java.sun.com/jsf/composite/tags"
    xmlns:c="http://java.sun.com/jstl/core" xmlns:p="http://primefaces.org/ui" template="/layout/template.xhtml">

    <ui:define name="navigation">
        <ui:include src="/layout/navigation.xhtml" />
    </ui:define>

    <ui:define name="body">

        <hf:formPanel label="#{messages['calendar.panel']}" backingBean="#{calendarBean}">

            <p:panelGrid columns="2" rendered="#{calendarBean.entity.id==null}">
                <p:outputLabel value="#{messages['calendar.type']}" />
                <p:selectOneMenu value="#{calendarBean.entity.calendarType}" required="true">
                    <f:selectItem itemValue="#{null}" itemLabel="" />
                    <f:selectItem itemValue="YEARLY" itemLabel="#{messages['calendar.calendarType.YEARLY']}" />
                    <f:selectItem itemValue="DAILY" itemLabel="#{messages['calendar.calendarType.DAILY']}" />
                    <f:selectItem itemValue="PERIOD" itemLabel="#{messages['calendar.calendarType.PERIOD']}" />
                    <p:ajax event="change" listener="#{calendarBean.changeCalendarType}" partialSubmit="true" process="@this" oncomplete="location.reload();" />
                </p:selectOneMenu>
            </p:panelGrid>
            <hf:formField label="#{messages['calendar.name']}" field="name" required="true" validateUnique="true" useConverter="false" />
            <hf:formField label="#{messages['calendar.description']}" field="description" useConverter="false" id="description" />
            <hf:formField label="#{messages['calendar.days']}" field="days" listType="pickUpList" childField="day" childField2="month"
                dualListModel="#{calendarBean.dayInYearModel}" rendered="#{calendarBean.entity.calendarType=='YEARLY'}" />
            <hf:formField label="#{messages['calendar.hours']}" field="hours" listType="pickUpList" childField="hour" childField2="day"
                dualListModel="#{calendarBean.hourInDayModel}" rendered="#{calendarBean.entity.calendarType=='DAILY'}" />
            <hf:formField label="#{messages['calendar.periodLength']}" field="periodLength" rendered="#{calendarBean.entity.calendarType=='PERIOD'}" />
            <hf:formField label="#{messages['calendar.nbPeriods']}" field="nbPeriods" rendered="#{calendarBean.entity.calendarType=='PERIOD'}" />

        </hf:formPanel>
    </ui:define>

</ui:composition>
