<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:f="http://java.sun.com/jsf/core" xmlns:h="http://java.sun.com/jsf/html"
    xmlns:hftl="http://hftl.org" xmlns:hf="http://java.sun.com/jsf/composite/tags" xmlns:pe="http://primefaces.org/ui/extensions" xmlns:p="http://primefaces.org/ui"
    template="/layout/template.xhtml">

    <ui:define name="metadata">
        <f:metadata>
            <f:viewParam name="objectId" value="#{businessAccountModelBean.objectId}" />
        </f:metadata>
    </ui:define>

    <ui:define name="navigation">
        <ui:include src="/layout/navigation.xhtml" />
    </ui:define>

    <ui:define name="body">

        <p:panel>
            <h:form id="crumbmenuForm">
                <p:breadCrumb homeDisplay="text" id="crumbmenu">
                    <p:menuitem value="#{messages['menu.crm']}" disabled="true" />
                    <p:menuitem outcome="businessAccountModels" value="#{messages['businessAccountModel.title']}" />
                </p:breadCrumb>
            </h:form>
        </p:panel>

        <ui:include src="../../admin/module/modulePopups.xhtml">
            <ui:param name="backingBean" value="#{businessAccountModelBean}" />
        </ui:include>

        <hftl:formPanel formId="moduleForm" label="#{messages['businessAccountModel.title']}" backingBean="#{businessAccountModelBean}"
            showEnableDisableButton="#{businessAccountModelBean.entity.installed}">

            <hftl:formField label="#{messages['BusinessEntity.code']}" field="code" required="true" validateUnique="true" />
            <hftl:formField label="#{messages['BusinessEntity.description']}" field="description" useConverter="false" id="description" />
            <hftl:formField label="#{messages['businessAccountModel.type']}" field="type" />
            <hftl:formField id="script" label="#{messages['meveoModule.script']}" field="script" valueLabelField="code" componentWidth="30" popup="true" popupId="moduleScriptPopup"
                createEditPopup="true" createEditPopupId="scriptDialog" createEditPopupListenerBean="#{businessAccountModelBean}" createEditPopupListenerViewMethod="viewEditScript"
                createEditPopupListenerNewMethod="newScript" createEditPopupListenerUpdate=":scriptForm" />
            <hftl:formField label="#{messages['meveoModule.installed']}" doNotShowOnNew="true" allowEdit="false" field="installed" isMessage="true"
                rendered="#{businessAccountModelBean.entity.moduleSource!=null}" />
            <hftl:formField label="#{messages['enableEntity.disabled']}" doNotShowOnNew="true" allowEdit="false" field="disabled" isMessage="true"
                rendered="#{businessAccountModelBean.entity.installed}" />

            <ui:include src="../../admin/module/moduleTree.xhtml">
                <ui:param name="backingBean" value="#{businessAccountModelBean}" />
            </ui:include>

        </hftl:formPanel>


    </ui:define>
</ui:composition>
