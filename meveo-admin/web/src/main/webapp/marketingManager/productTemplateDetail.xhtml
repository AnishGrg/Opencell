<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:c="http://java.sun.com/jstl/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:s="http://jboss.org/seam/faces"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html" xmlns:hftl="http://hftl.org"
	xmlns:hf="http://java.sun.com/jsf/composite/tags"
	template="/marketingManager/layout/template.xhtml">

	<ui:define name="metadata">
		<f:metadata>
			<f:event type="preRenderView"
				listener="#{productTemplateBean.preRenderView}" />
			<f:event type="preRenderView"
				listener="#{productTemplateBean.initEntity}" />
			<f:viewParam name="editMode" value="#{productTemplateBean.editMode}" />
		</f:metadata>
	</ui:define>

	<ui:define name="navigation">
		<ui:include src="/marketingManager/layout/navigation.xhtml" />
	</ui:define>

	<ui:define name="body">
		<hftl:formPanel label="#{messages['menu.productTemplates']}"
			backingBean="#{productTemplateBean}" showEnableDisableButton="false"
			showBackButton="false" showEditButton="false"
			showDeleteButton="false">
			<p:panel>
				<p:panelGrid columns="2" styleClass="ui-panelgrid-blank">
					<p:panelGrid columns="1" styleClass="ui-panelgrid-blank">
						<p:breadCrumb homeDisplay="text" id="crumbmenu">
							<p:menuitem value="#{messages['menu.catalog']}" disabled="true" />
							<p:menuitem outcome="mmProductTemplates"
								value="#{messages['productTemplates.search']}" />
						</p:breadCrumb>
					</p:panelGrid>
					<p:panelGrid columns="3" styleClass="ui-panelgrid-blank TexAlRight">
						<p:commandButton value="#{messages['action.activate']}"
							action="#{productTemplateBean.activateProduct()}"
							rendered="#{productTemplateBean.editMode != null and productTemplateBean.editMode.length() > 0}"
							icon="ui-icon-check" />
						<p:commandButton value="#{messages['action.saveAsDraft']}"
							action="#{productTemplateBean.saveAsDraft()}"
							rendered="#{productTemplateBean.editMode != null and productTemplateBean.editMode.length() > 0}" />
						<p:commandButton value="#{messages['action.discardChanges']}"
							action="#{productTemplateBean.discardChanges()}"
							rendered="#{productTemplateBean.editMode != null and productTemplateBean.editMode.length() > 0}" />
					</p:panelGrid>
				</p:panelGrid>
			</p:panel>

			<p:panelGrid columns="3" styleClass="ui-panelgrid-blank">
				<p:panelGrid columns="1">
					<p:panelGrid columns="2">
						<p:panelGrid columns="1">
							<hftl:decorateFormField fieldId="productImage"
								rendered="#{not productTemplateBean.entity.transient}"
								label="#{messages['commons.image']}">
								<p:outputPanel autoUpdate="true">
									<p:graphicImage id="productImage" cache="false"
										value="#{productTemplateImageStreamer.image}" height="150"
										width="150">
										<f:param name="id" value="#{productTemplateBean.entity.id}"></f:param>
									</p:graphicImage>
									<p:fileUpload
										fileUploadListener="#{productTemplateBean.handleFileUpload}"
										mode="advanced" update=":formId:messages" auto="true"
										sizeLimit="1000000" allowTypes="/(\.|\/)(gif|jpe?g|png)$/" />
								</p:outputPanel>
							</hftl:decorateFormField>
						</p:panelGrid>
						<p:panelGrid columns="1">
							<hftl:formField label="#{messages['businessEntity.code']}"
								field="code" required="true" validateUnique="true" />
							<hftl:formField label="#{messages['commons.name']}" field="name"
								required="true" id="name" />
							<p:panelGrid columns="2">
								<hftl:formField label="#{messages['commons.status']}"
									field="lifeCycleStatus" />
							</p:panelGrid>
						</p:panelGrid>
					</p:panelGrid>
					<p:panelGrid>
						<p:row>
							<p:column>
								<hftl:formField label="#{messages['commons.validFrom']}"
									field="validFrom" id="validFrom" rowspan="3" />
							</p:column>
							<p:column>
								<hftl:formField label="#{messages['commons.validTo']}"
									field="validTo" id="validTo" />
							</p:column>
						</p:row>
						<p:row>
							<p:column></p:column>
							<p:column>
								<hftl:formField label="#{messages['productTemplate.family']}"
									field="businessProductModel" required="true"
									id="businessProductModel" />
							</p:column>
						</p:row>
						<p:row>
							<p:column></p:column>
							<p:column>
								<hftl:formField
									label="#{messages['productOffering.offerTemplateCategories']}"
									field="offerTemplateCategories" required="true"
									id="offerTemplateCategories" />

							</p:column>
						</p:row>
					</p:panelGrid>
				</p:panelGrid>
				<p:tabView>
					<p:tab title="EUR">
						<p:panelGrid columns="1" styleClass="ui-panelgrid-blank">
							<p:outputLabel value="#{messages['productTemplate.salePrice']}" />
							<h:outputText
								value="#{productTemplateBean.entityPricePlan.amountWithTax}" />
							<p:outputLabel
								value="#{messages['productTemplate.catalogPrice']}" />
							<h:outputText
								value="#{productTemplateBean.entityPricePlan.amountWithTax}" />
						</p:panelGrid>
					</p:tab>
					<p:tab title="USA"></p:tab>
					<p:tab title="JPN"></p:tab>
				</p:tabView>
				<p:panelGrid columns="1">
				</p:panelGrid>
			</p:panelGrid>
			<p:tabView>
				<p:tab title="EN">
					<hftl:formField label="#{messages['businessEntity.description']}"
						field="description" id="description" />
				</p:tab>
				<p:tab title="FR"></p:tab>
				<p:tab title="DE"></p:tab>
				<p:tab title="US"></p:tab>

			</p:tabView>
			<hftl:customFields backingBean="#{productTemplateBean}" />
		</hftl:formPanel>
	</ui:define>
</ui:composition>