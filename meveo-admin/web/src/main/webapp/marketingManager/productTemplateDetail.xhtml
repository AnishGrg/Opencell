<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:c="http://java.sun.com/jstl/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:s="http://jboss.org/seam/faces"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html" xmlns:hftl="http://hftl.org"
	xmlns:hf="http://java.sun.com/jsf/composite/tags"
	template="/marketingManager/layout/template.xhtml">

	<ui:define name="metadata">
		<f:metadata>
			<f:event type="preRenderView"
				listener="#{productTemplateBean.preRenderView}" />
			<f:event type="preRenderView"
				listener="#{productTemplateBean.initEntity}" />
			<f:viewParam name="editMode" value="#{productTemplateBean.editMode}" />
		</f:metadata>
	</ui:define>

	<ui:define name="navigation">
		<ui:include src="/marketingManager/layout/navigation.xhtml" />
	</ui:define>

	<ui:define name="body">
		<hftl:formPanel label="#{messages['menu.productTemplates']}"
			backingBean="#{productTemplateBean}" showFormButtons="false">
			<p:panel styleClass="TexAlRight">

				<p:commandButton value="#{messages['action.activate']}"
					action="#{productTemplateBean.activateProduct()}"
					rendered="#{productTemplateBean.editMode != null and productTemplateBean.editMode.length() > 0}"
					icon="ui-icon-check" update="@form" />
				<p:commandButton value="#{messages['action.saveAsDraft']}"
					action="#{productTemplateBean.saveAsDraft()}"
					rendered="#{productTemplateBean.editMode != null and productTemplateBean.editMode.length() > 0}"
					update="@form" />
				<p:commandButton value="#{messages['action.discardChanges']}"
					action="#{productTemplateBean.discardChanges()}"
					rendered="#{productTemplateBean.editMode != null and productTemplateBean.editMode.length() > 0}"
					update="@form" />
			</p:panel>

			<p:panel styleClass="ui-panel-blank">

				<p:breadCrumb homeDisplay="text" id="crumbmenu">
					<p:menuitem value="#{messages['menu.catalog']}" disabled="true" />
					<p:menuitem outcome="mmProductTemplates"
						value="#{messages['productTemplates.search']}" />
				</p:breadCrumb>


			</p:panel>

			<p:panelGrid styleClass="ui-panelgrid-blank">
				<p:row>
					<p:column style="width : 34%">
						<p:panelGrid>
							<p:row>
								<p:column rowspan="4">
									<hftl:decorateFormField fieldId="productImageUpload"
										rendered="#{productTemplateBean.entity.transient}"
										label="#{messages['commons.image']}">
										<p:fileUpload id="productImageUpload" auto="false"
											skinSimple="true" mode="simple"
											value="#{productTemplateBean.uploadedFile}" />
									</hftl:decorateFormField>
									<hftl:decorateFormField fieldId="productImage"
										rendered="#{not productTemplateBean.entity.transient}"
										label="#{messages['commons.image']}">
										<p:outputPanel autoUpdate="true">
											<p:graphicImage id="productImage" cache="false"
												value="#{productTemplateImageStreamer.image}" height="150"
												width="150">
												<f:param name="id" value="#{productTemplateBean.entity.id}"></f:param>
											</p:graphicImage>
											<p:fileUpload
												fileUploadListener="#{productTemplateBean.handleFileUpload}"
												mode="advanced" update=":formId:messages" auto="true"
												sizeLimit="1000000" allowTypes="/(\.|\/)(gif|jpe?g|png)$/" />
										</p:outputPanel>
									</hftl:decorateFormField>
								</p:column>
							</p:row>
							<p:row>
								<p:column>
									<hftl:formField label="#{messages['businessEntity.code']}"
										field="code" required="true" validateUnique="true" />
								</p:column>
							</p:row>
							<p:row>
								<p:column>
									<hftl:formField label="#{messages['commons.name']}"
										field="name" required="true" id="name" />
								</p:column>
							</p:row>
							<p:row>
								<p:column>
									<hftl:formField label="#{messages['commons.status']}"
										field="lifeCycleStatus" />
								</p:column>
							</p:row>

							<p:row>
								<p:column>
									<hftl:formField label="#{messages['commons.validFrom']}"
										field="validFrom" id="validFrom" />
								</p:column>
								<p:column>
									<hftl:formField label="#{messages['commons.validTo']}"
										field="validTo" id="validTo" />
								</p:column>
							</p:row>
							<p:row>
								<p:column></p:column>
								<p:column>
									<hftl:formField label="#{messages['productTemplate.family']}"
										field="businessProductModel" required="true"
										id="businessProductModel" valueLabelField="code"
										listElements="#{businessProductModelBean.listAll()}" />
								</p:column>
							</p:row>
							<p:row>
								<p:column></p:column>
								<p:column>
									<hftl:formField
										label="#{messages['productOffering.offerTemplateCategories']}"
										field="offerTemplateCategories" required="true"
										id="offerTemplateCategories" />
								</p:column>
							</p:row>
						</p:panelGrid>
					</p:column>
					<p:column style="width : 33%">
						<p:tabView>
							<p:tab title="EUR">
								<p:panelGrid columns="1" styleClass="ui-panelgrid-blank">
									<p:outputLabel value="#{messages['productTemplate.salePrice']}" />
									<h:outputText
										value="#{productTemplateBean.entityPricePlan.amountWithTax}"
										rendered="#{productTemplateBean.entityPricePlan != null}" />
									<p:outputLabel value="0.00"
										rendered="#{productTemplateBean.entityPricePlan == null}" />
									<p:outputLabel
										value="#{messages['productTemplate.catalogPrice']}" />
									<h:outputText value="#{productTemplateBean.catalogPrice}"
										rendered="#{productTemplateBean.entityPricePlan != null}" />
									<p:outputLabel value="0.00"
										rendered="#{productTemplateBean.entityPricePlan == null}" />
									<p:outputLabel
										value="#{messages['productTemplate.discountedAmount']}" />
									<h:outputText value="#{productTemplateBean.discountedAmount}"
										rendered="#{productTemplateBean.entityPricePlan != null}" />
									<p:outputLabel value="0.00"
										rendered="#{productTemplateBean.entityPricePlan == null}" />
								</p:panelGrid>
							</p:tab>
							<p:tab title="USA"></p:tab>
							<p:tab title="JPN"></p:tab>
						</p:tabView>
					</p:column>
					<p:column style="width : 33%">
						<p:panelGrid columns="1" style="max-width: 100%">
							<p:outputLabel value="#{messages['productTemplate.channel']}" />
							<p:selectOneListbox id="pTChannel">
								<f:selectItem itemLabel="Channel 1" itemValue="1" />
								<f:selectItem itemLabel="Channel 2" itemValue="2" />
								<f:selectItem itemLabel="Channel 3" itemValue="3" />
							</p:selectOneListbox>
							<p:outputLabel
								value="#{messages['productTemplate.targetSegment']}" />
							<p:selectOneListbox id="pTTargetSegment" style="width : 100%">
								<f:selectItem itemLabel="Target Segment 1" itemValue="1" />
								<f:selectItem itemLabel="Target Segment 2" itemValue="2" />
								<f:selectItem itemLabel="Target Segment 3" itemValue="3" />
							</p:selectOneListbox>
						</p:panelGrid>
					</p:column>
				</p:row>
			</p:panelGrid>
			<p:tabView>
				<p:tab title="EN">
					<hftl:formField label="#{messages['businessEntity.description']}"
						field="description" id="description" />
				</p:tab>
				<p:tab title="FR"></p:tab>
				<p:tab title="DE"></p:tab>
				<p:tab title="US"></p:tab>

			</p:tabView>
			<hftl:customFields backingBean="#{productTemplateBean}" />
		</hftl:formPanel>
	</ui:define>
</ui:composition>