<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.2.xsd">

	<property name="now" value="now()" dbms="postgresql" />

	<changeSet id="#655_20150522" author="EdwardLegaspi">
		<insert tableName="ar_credit_category">
			<column name="id" valueNumeric="1" />
			<column name="version" valueNumeric="0" />
			<column name="disabled" valueBoolean="false" />
			<column name="created" valueDate="${now}" />
			<column name="code" value="PART_C" />
			<column name="description" value="Part C" />
			<column name="provider_id" valueNumeric="1" />
		</insert>
		<insert tableName="ar_credit_category">
			<column name="id" valueNumeric="2" />
			<column name="version" valueNumeric="0" />
			<column name="disabled" valueBoolean="false" />
			<column name="created" valueDate="${now}" />
			<column name="code" value="PART_M" />
			<column name="description" value="Part M" />
			<column name="provider_id" valueNumeric="1" />
		</insert>
		<insert tableName="ar_credit_category">
			<column name="id" valueNumeric="3" />
			<column name="version" valueNumeric="0" />
			<column name="disabled" valueBoolean="false" />
			<column name="created" valueDate="${now}" />
			<column name="code" value="PRO" />
			<column name="description" value="PRO" />
			<column name="provider_id" valueNumeric="1" />
		</insert>
		<insert tableName="ar_credit_category">
			<column name="id" valueNumeric="4" />
			<column name="version" valueNumeric="0" />
			<column name="disabled" valueBoolean="false" />
			<column name="created" valueDate="${now}" />
			<column name="code" value="VIP" />
			<column name="description" value="VIP" />
			<column name="provider_id" valueNumeric="1" />
		</insert>
		<insert tableName="ar_credit_category">
			<column name="id" valueNumeric="5" />
			<column name="version" valueNumeric="0" />
			<column name="disabled" valueBoolean="false" />
			<column name="created" valueDate="${now}" />
			<column name="code" value="NEWCUSTOMER" />
			<column name="description" value="New Customer" />
			<column name="provider_id" valueNumeric="1" />
		</insert>
	</changeSet>

	<changeSet id="#655_20150523" author="EdwardLegaspi">
		<sql><![CDATA[ update ar_customer_account a set credit_category_id=(select b.id from ar_credit_category b where b.code=a.credit_category); ]]></sql>
		<sql><![CDATA[ update ar_dunning_plan a set credit_category_id=(select b.id from ar_credit_category b where b.code=a.credit_category); ]]></sql>
		<dropColumn tableName="ar_customer_account" columnName="credit_category" />
		<dropColumn tableName="ar_dunning_plan" columnName="credit_category" />
	</changeSet>
	
	<changeSet id="846-2015604-1" author="TyshanShi">
		<dropAllForeignKeyConstraints baseTableName="adm_user_provider"/>
		<dropTable tableName="adm_user_provider"/>
	</changeSet>

</databaseChangeLog>